<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rochas A√ßa√≠ - Autoatendimento</title>

<style>
* { box-sizing: border-box; font-family: Arial, sans-serif; }

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(180deg, #5a189a, #7b2cbf);
  display: flex;
  justify-content: center;
  align-items: center;
}

.container {
  width: 100%;
  display: flex;
  justify-content: center;
  position: relative;
}

.config-btn {
  position: absolute;
  top: -60px;
  right: 10px;
  background: #fff;
  color: #5a189a;
  border-radius: 50%;
  width: 44px;
  height: 44px;
  font-size: 22px;
  border: none;
  cursor: pointer;
}

.tela {
  display: none;
  background: #fff;
  width: 90%;
  max-width: 420px;
  padding: 30px;
  border-radius: 18px;
  text-align: center;
  box-shadow: 0 20px 40px rgba(0,0,0,0.25);
}

.tela.ativa { display: block; }

.titulo-loja {
  font-size: 22px;
  font-weight: bold;
  color: #5a189a;
  margin-bottom: 20px;
}

input {
  width: 100%;
  padding: 15px;
  font-size: 18px;
  margin: 15px 0;
  border-radius: 10px;
  border: 1px solid #ccc;
}

button {
  width: 100%;
  padding: 15px;
  font-size: 18px;
  margin-top: 10px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(90deg, #7b2cbf, #9d4edd);
  color: #fff;
  cursor: pointer;
}

h2 { margin: 10px 0 20px; }

.avaliacao {
  display: flex;
  justify-content: space-between;
}

.avaliacao button {
  width: 18%;
  font-size: 28px;
  background: none;
}

/* MODAL CONFIG */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
}

.modal-content {
  background: #fff;
  padding: 25px;
  border-radius: 15px;
  width: 90%;
  max-width: 350px;
  text-align: center;
}
</style>
</head>

<body>

<div class="container">
  <button class="config-btn" onclick="abrirSenha()">‚öô</button>

  <!-- TELA 1 -->
  <div class="tela ativa" id="telaTelefone">
    <div class="titulo-loja" id="tituloLoja">Rochas A√ßa√≠ ‚Äì Unidade Ilha 9</div>
    <input type="tel" id="telefone" placeholder="Digite seu telefone">
    <button onclick="irParaPeso()">Continuar</button>
  </div>

  <!-- TELA 2 -->
  <div class="tela" id="telaPeso">
    <h2>Peso atual</h2>
    <h2 id="peso">0 g</h2>
    <button onclick="simularPeso()">Simular peso</button>
    <button onclick="irParaPagamento()">Continuar</button>
  </div>

  <!-- TELA 3 -->
  <div class="tela" id="telaPagamento">
    <h2>Pague na maquininha agora</h2>
    <h2 id="valor">R$ 0,00</h2>
    <button onclick="confirmarPagamento()">Pagamento confirmado</button>
  </div>

  <!-- TELA 4 -->
  <div class="tela" id="telaAvaliacao">
    <h2>Avalie o atendimento</h2>
    <div class="avaliacao">
      <button onclick="avaliar(1)">üò°</button>
      <button onclick="avaliar(2)">üòï</button>
      <button onclick="avaliar(3)">üòê</button>
      <button onclick="avaliar(4)">üôÇ</button>
      <button onclick="avaliar(5)">üòç</button>
    </div>
  </div>
</div>

<!-- MODAIS -->
<div class="modal" id="modalSenha">
  <div class="modal-content">
    <h3>Senha</h3>
    <input type="password" id="senhaConfig" placeholder="Digite a senha">
    <button onclick="validarSenha()">Entrar</button>
  </div>
</div>

<div class="modal" id="modalConfig">
  <div class="modal-content">
    <h3>Configura√ß√µes</h3>
    <input type="number" id="novoValorKg" placeholder="Valor do KG (ex: 50)">
    <input type="text" id="novoTitulo" placeholder="T√≠tulo da loja">
    <button onclick="salvarConfig()">Salvar</button>
    <button onclick="baixarPDF()">Baixar relat√≥rio PDF</button>
    <button onclick="fecharConfig()">Fechar</button>
  </div>
</div>

<script>
let pesoAtual = 0;
let valorKg = 50;
let vendas = [];

function trocarTela(id){
  document.querySelectorAll('.tela').forEach(t=>t.classList.remove('ativa'));
  document.getElementById(id).classList.add('ativa');
}

function irParaPeso(){
  if(telefone.value.length < 8) return alert("Telefone inv√°lido");
  trocarTela('telaPeso');
}

function simularPeso(){
  pesoAtual = Math.floor(Math.random()*800)+200;
  peso.innerText = pesoAtual + " g";
}

function irParaPagamento(){
  if(pesoAtual===0) return alert("Peso inv√°lido");
  const valor = ((pesoAtual/1000)*valorKg).toFixed(2);
  valorEl = document.getElementById("valor");
  valorEl.innerText = "R$ " + valor.replace('.',',');
  trocarTela('telaPagamento');
}

function confirmarPagamento(){
  vendas.push({peso:pesoAtual, data:new Date()});
  trocarTela('telaAvaliacao');
  setTimeout(()=>trocarTela('telaTelefone'),3000);
}

function avaliar(n){ console.log("Avalia√ß√£o:",n); }

function abrirSenha(){ modalSenha.style.display='flex'; }
function validarSenha(){
  if(senhaConfig.value==="1951"){
    modalSenha.style.display='none';
    modalConfig.style.display='flex';
  } else alert("Senha incorreta");
}

function salvarConfig(){
  if(novoValorKg.value) valorKg = parseFloat(novoValorKg.value);
  if(novoTitulo.value) tituloLoja.innerText = novoTitulo.value;
  alert("Configura√ß√µes salvas");
}

function baixarPDF(){
  window.print();
}

function fecharConfig(){
  modalConfig.style.display='none';
}
</script>

</body>
</html>
